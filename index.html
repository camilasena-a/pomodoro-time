<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Uma plataforma moderna para aplicar a t√©cnica Pomodoro e aumentar sua produtividade">
    <meta name="theme-color" content="#E74C3C">
    <title>Pomodoro Timer - Foco e Produtividade</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
    
    <!-- Apple Touch Icon (iOS) -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Fallback SVG icon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÖ</text></svg>">
</head>
<body>
    <!-- Skip link para acessibilidade -->
    <a href="#main-content" class="skip-link">Pular para conte√∫do principal</a>
    
    <!-- Barra superior com utilit√°rios -->
    <div class="top-bar">
        <button class="icon-btn" id="theme-toggle" aria-label="Alternar tema claro/escuro" aria-pressed="false" title="Alternar tema (T)">
            <span class="icon" id="theme-icon" aria-hidden="true">üåô</span>
            <span class="tooltip">Alternar tema</span>
        </button>
        <button class="icon-btn" id="settings-toggle" aria-label="Abrir configura√ß√µes" title="Configura√ß√µes (S)">
            <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
            <span class="tooltip">Configura√ß√µes</span>
        </button>
        <button class="icon-btn" id="stats-toggle" aria-label="Ver estat√≠sticas" title="Estat√≠sticas">
            <span class="icon" aria-hidden="true">üìä</span>
            <span class="tooltip">Estat√≠sticas</span>
        </button>
        <button class="icon-btn" id="tasks-toggle" aria-label="Gerenciar tarefas" title="Tarefas">
            <span class="icon" aria-hidden="true">üìù</span>
            <span class="tooltip">Tarefas</span>
        </button>
        <button class="icon-btn" id="history-toggle" aria-label="Ver hist√≥rico" title="Hist√≥rico">
            <span class="icon" aria-hidden="true">üìà</span>
            <span class="tooltip">Hist√≥rico</span>
        </button>
        <button class="icon-btn" id="achievements-toggle" aria-label="Ver conquistas" title="Conquistas">
            <span class="icon" aria-hidden="true">üèÜ</span>
            <span class="tooltip">Conquistas</span>
        </button>
    </div>

    <!-- Container principal -->
    <div class="container" id="main-content">
        <!-- Timer central -->
        <div class="timer-wrapper">
            <div class="progress-ring">
                <svg class="progress-ring-svg" viewBox="0 0 280 280" preserveAspectRatio="xMidYMid meet">
                    <circle class="progress-ring-circle-bg" cx="140" cy="140" r="130" style="stroke: #FF6347 !important; fill: none;"></circle>
                    <circle class="progress-ring-circle" cx="140" cy="140" r="130" style="stroke: #FF6347 !important; fill: none;"></circle>
                </svg>
                <div class="time-wrapper">
                    <div class="time" id="timer" aria-live="polite" aria-atomic="true" role="timer" aria-label="Tempo restante">25:00</div>
                </div>
            </div>
            <div class="session-info">
                <span id="session-type">Trabalho</span>
                <span class="separator">‚Ä¢</span>
                <span>Sess√£o <span id="session-count">1</span></span>
            </div>
        </div>

        <!-- Bot√µes laterais esquerda (controles principais) -->
        <div class="side-controls side-controls-left">
            <button class="side-btn" id="start-btn" aria-label="Iniciar timer" title="Iniciar timer (Espa√ßo)">
                <span class="icon" aria-hidden="true">‚ñ∂</span>
                <span class="tooltip">Iniciar</span>
            </button>
            <button class="side-btn" id="pause-btn" style="display: none;" aria-label="Pausar timer" title="Pausar timer (Espa√ßo)">
                <span class="icon" aria-hidden="true">‚è∏</span>
                <span class="tooltip">Pausar</span>
            </button>
            <button class="side-btn" id="reset-btn" aria-label="Resetar timer" title="Resetar timer (R)">
                <span class="icon" aria-hidden="true">‚èπ</span>
                <span class="tooltip">Resetar</span>
            </button>
        </div>

        <!-- Bot√µes laterais direita (presets) -->
        <div class="side-controls side-controls-right">
            <button class="side-btn preset-btn" data-minutes="25" aria-label="Definir timer para Pomodoro de 25 minutos">
                <span class="icon" aria-hidden="true">25</span>
                <span class="tooltip">Pomodoro (25min)</span>
            </button>
            <button class="side-btn preset-btn" data-minutes="5" aria-label="Definir timer para pausa curta de 5 minutos">
                <span class="icon" aria-hidden="true">5</span>
                <span class="tooltip">Pausa Curta (5min)</span>
            </button>
            <button class="side-btn preset-btn" data-minutes="15" aria-label="Definir timer para pausa longa de 15 minutos">
                <span class="icon" aria-hidden="true">15</span>
                <span class="tooltip">Pausa Longa (15min)</span>
            </button>
        </div>

        <!-- Estat√≠sticas discretas (canto inferior direito) -->
        <div class="stats-minimal" id="stats-minimal">
            <div class="stat-minimal-item">
                <span class="stat-value" id="completed-pomodoros">0</span>
                <span class="stat-label">Pomodoros</span>
            </div>
            <div class="stat-minimal-item">
                <span class="stat-value" id="total-time">0h</span>
                <span class="stat-label">Tempo Total</span>
            </div>
            <div class="stat-minimal-item" id="goal-display" style="display: none;">
                <span class="stat-value" id="goal-progress">0%</span>
                <span class="stat-label">Meta Di√°ria</span>
            </div>
            <div class="stat-minimal-item" id="streak-display" style="display: none;">
                <span class="stat-value" id="streak-count">üî• 0</span>
                <span class="stat-label">Streak</span>
            </div>
        </div>
    </div>

    <!-- Marca d'√°gua -->
    <div class="watermark">developed by <a href="https://github.com/camilasena-a" target="_blank" rel="noopener noreferrer">Camila Sena</a></div>

    <!-- Modal de Configura√ß√µes -->
    <div class="modal" id="settings-modal" role="dialog" aria-labelledby="settings-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="settings-title">Configura√ß√µes</h2>
                <button class="icon-btn modal-close" aria-label="Fechar configura√ß√µes">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="work-duration">Dura√ß√£o do Trabalho (minutos)</label>
                    <input type="number" id="work-duration" min="1" max="120" value="25" step="1">
                    <span class="validation-error" id="work-duration-error" role="alert" aria-live="polite"></span>
                </div>
                <div class="setting-item">
                    <label for="short-break">Pausa Curta (minutos)</label>
                    <input type="number" id="short-break" min="1" max="30" value="5" step="1">
                    <span class="validation-error" id="short-break-error" role="alert" aria-live="polite"></span>
                </div>
                <div class="setting-item">
                    <label for="long-break">Pausa Longa (minutos)</label>
                    <input type="number" id="long-break" min="1" max="60" value="15" step="1">
                    <span class="validation-error" id="long-break-error" role="alert" aria-live="polite"></span>
                </div>
                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="sound-notification" checked>
                        <span>Notifica√ß√£o sonora</span>
                    </label>
                </div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Estat√≠sticas -->
    <div class="modal" id="stats-modal" role="dialog" aria-labelledby="stats-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="stats-title">Estat√≠sticas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar estat√≠sticas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="stat-card-full">
                    <div class="stat-value-large" id="stats-completed-pomodoros">0</div>
                    <div class="stat-label-large">Pomodoros Completos</div>
                </div>
                <div class="stat-card-full">
                    <div class="stat-value-large" id="stats-total-time">0h</div>
                    <div class="stat-label-large">Tempo Total Focado</div>
                </div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Tarefas -->
    <div class="modal" id="tasks-modal" role="dialog" aria-labelledby="tasks-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="tasks-title">Tarefas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar tarefas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="task-input-container">
                    <input type="text" id="new-task-input" placeholder="Nova tarefa..." class="task-input">
                    <button id="add-task-btn" class="btn-primary">Adicionar</button>
                </div>
                <div id="tasks-list" class="tasks-list"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Hist√≥rico -->
    <div class="modal" id="history-modal" role="dialog" aria-labelledby="history-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="history-title">Hist√≥rico</h2>
                <button class="icon-btn modal-close" aria-label="Fechar hist√≥rico">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="history-chart-container">
                    <canvas id="history-chart"></canvas>
                </div>
                <div id="history-stats" class="history-stats"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Conquistas -->
    <div class="modal" id="achievements-modal" role="dialog" aria-labelledby="achievements-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="achievements-title">Conquistas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar conquistas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="achievements-list" class="achievements-list"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .catch((error) => {
                        // Service Worker falhou ao registrar (silenciosamente)
                        // Em produ√ß√£o, considerar logging condicional
                    });
            });
        }
    </script>
</body>
</html>
