<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Uma plataforma moderna para aplicar a t√©cnica Pomodoro e aumentar sua produtividade">
    <meta name="theme-color" content="#E74C3C">
    <title>Pomodoro Timer - Foco e Produtividade</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÖ</text></svg>">
</head>
<body>
    <!-- Barra superior com utilit√°rios -->
    <div class="top-bar">
        <button class="icon-btn" id="theme-toggle" aria-label="Alternar tema claro/escuro">
            <span class="icon" id="theme-icon">üåô</span>
            <span class="tooltip">Alternar tema</span>
        </button>
        <button class="icon-btn" id="settings-toggle" aria-label="Abrir configura√ß√µes">
            <span class="icon">‚öôÔ∏è</span>
            <span class="tooltip">Configura√ß√µes</span>
        </button>
        <button class="icon-btn" id="stats-toggle" aria-label="Ver estat√≠sticas">
            <span class="icon">üìä</span>
            <span class="tooltip">Estat√≠sticas</span>
        </button>
        <button class="icon-btn" id="tasks-toggle" aria-label="Gerenciar tarefas">
            <span class="icon">üìù</span>
            <span class="tooltip">Tarefas</span>
        </button>
        <button class="icon-btn" id="history-toggle" aria-label="Ver hist√≥rico">
            <span class="icon">üìà</span>
            <span class="tooltip">Hist√≥rico</span>
        </button>
        <button class="icon-btn" id="achievements-toggle" aria-label="Ver conquistas">
            <span class="icon">üèÜ</span>
            <span class="tooltip">Conquistas</span>
        </button>
    </div>

    <!-- Container principal -->
    <div class="container">
        <!-- Timer central -->
        <div class="timer-wrapper">
            <div class="progress-ring">
                <svg class="progress-ring-svg" viewBox="0 0 280 280" preserveAspectRatio="xMidYMid meet">
                    <circle class="progress-ring-circle-bg" cx="140" cy="140" r="130" style="stroke: #FF6347 !important; fill: none;"></circle>
                    <circle class="progress-ring-circle" cx="140" cy="140" r="130" style="stroke: #FF6347 !important; fill: none;"></circle>
                </svg>
                <div class="time-wrapper">
                    <div class="time" id="timer" aria-live="polite">25:00</div>
                </div>
            </div>
            <div class="session-info">
                <span id="session-type">Trabalho</span>
                <span class="separator">‚Ä¢</span>
                <span>Sess√£o <span id="session-count">1</span></span>
            </div>
        </div>

        <!-- Bot√µes laterais esquerda (controles principais) -->
        <div class="side-controls side-controls-left">
            <button class="side-btn" id="start-btn" aria-label="Iniciar timer">
                <span class="icon">‚ñ∂</span>
                <span class="tooltip">Iniciar</span>
            </button>
            <button class="side-btn" id="pause-btn" style="display: none;" aria-label="Pausar timer">
                <span class="icon">‚è∏</span>
                <span class="tooltip">Pausar</span>
            </button>
            <button class="side-btn" id="reset-btn" aria-label="Resetar timer">
                <span class="icon">‚èπ</span>
                <span class="tooltip">Resetar</span>
            </button>
        </div>

        <!-- Bot√µes laterais direita (presets) -->
        <div class="side-controls side-controls-right">
            <button class="side-btn preset-btn" data-minutes="25" aria-label="Pomodoro 25 minutos">
                <span class="icon">25</span>
                <span class="tooltip">Pomodoro (25min)</span>
            </button>
            <button class="side-btn preset-btn" data-minutes="5" aria-label="Pausa curta 5 minutos">
                <span class="icon">5</span>
                <span class="tooltip">Pausa Curta (5min)</span>
            </button>
            <button class="side-btn preset-btn" data-minutes="15" aria-label="Pausa longa 15 minutos">
                <span class="icon">15</span>
                <span class="tooltip">Pausa Longa (15min)</span>
            </button>
        </div>

        <!-- Estat√≠sticas discretas (canto inferior direito) -->
        <div class="stats-minimal" id="stats-minimal">
            <div class="stat-minimal-item">
                <span class="stat-value" id="completed-pomodoros">0</span>
                <span class="stat-label">Pomodoros</span>
            </div>
            <div class="stat-minimal-item">
                <span class="stat-value" id="total-time">0h</span>
                <span class="stat-label">Tempo Total</span>
            </div>
            <div class="stat-minimal-item" id="goal-display" style="display: none;">
                <span class="stat-value" id="goal-progress">0%</span>
                <span class="stat-label">Meta Di√°ria</span>
            </div>
            <div class="stat-minimal-item" id="streak-display" style="display: none;">
                <span class="stat-value" id="streak-count">üî• 0</span>
                <span class="stat-label">Streak</span>
            </div>
        </div>
    </div>

    <!-- Marca d'√°gua -->
    <div class="watermark">developed by Camila Sena</div>

    <!-- Modal de Configura√ß√µes -->
    <div class="modal" id="settings-modal" role="dialog" aria-labelledby="settings-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="settings-title">Configura√ß√µes</h2>
                <button class="icon-btn modal-close" aria-label="Fechar configura√ß√µes">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="work-duration">Dura√ß√£o do Trabalho (minutos)</label>
                    <input type="number" id="work-duration" min="1" max="60" value="25">
                </div>
                <div class="setting-item">
                    <label for="short-break">Pausa Curta (minutos)</label>
                    <input type="number" id="short-break" min="1" max="30" value="5">
                </div>
                <div class="setting-item">
                    <label for="long-break">Pausa Longa (minutos)</label>
                    <input type="number" id="long-break" min="1" max="60" value="15">
                </div>
                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="sound-notification" checked>
                        <span>Notifica√ß√£o sonora</span>
                    </label>
                </div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Estat√≠sticas -->
    <div class="modal" id="stats-modal" role="dialog" aria-labelledby="stats-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="stats-title">Estat√≠sticas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar estat√≠sticas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="stat-card-full">
                    <div class="stat-value-large" id="stats-completed-pomodoros">0</div>
                    <div class="stat-label-large">Pomodoros Completos</div>
                </div>
                <div class="stat-card-full">
                    <div class="stat-value-large" id="stats-total-time">0h</div>
                    <div class="stat-label-large">Tempo Total Focado</div>
                </div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Tarefas -->
    <div class="modal" id="tasks-modal" role="dialog" aria-labelledby="tasks-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="tasks-title">Tarefas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar tarefas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="task-input-container">
                    <input type="text" id="new-task-input" placeholder="Nova tarefa..." class="task-input">
                    <button id="add-task-btn" class="btn-primary">Adicionar</button>
                </div>
                <div id="tasks-list" class="tasks-list"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Hist√≥rico -->
    <div class="modal" id="history-modal" role="dialog" aria-labelledby="history-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="history-title">Hist√≥rico</h2>
                <button class="icon-btn modal-close" aria-label="Fechar hist√≥rico">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="history-chart-container">
                    <canvas id="history-chart"></canvas>
                </div>
                <div id="history-stats" class="history-stats"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Modal de Conquistas -->
    <div class="modal" id="achievements-modal" role="dialog" aria-labelledby="achievements-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="achievements-title">Conquistas</h2>
                <button class="icon-btn modal-close" aria-label="Fechar conquistas">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="achievements-list" class="achievements-list"></div>
            </div>
        </div>
        <div class="modal-backdrop" aria-label="Fechar modal"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        // Aplicar cor vermelha tomate imediatamente quando a p√°gina carregar
        function applyTomatoRed() {
            const circles = document.querySelectorAll('.progress-ring-circle, .progress-ring-circle-bg');
            circles.forEach(circle => {
                if (circle) {
                    circle.style.stroke = '#FF6347';
                    circle.setAttribute('stroke', '#FF6347');
                }
            });
        }
        
        // Aplicar imediatamente
        applyTomatoRed();
        
        // Aplicar quando o DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', applyTomatoRed);
        } else {
            applyTomatoRed();
        }
        
        // Aplicar periodicamente para garantir (caso algo sobrescreva)
        setInterval(applyTomatoRed, 100);
    </script>
    <script src="script.js"></script>
    <script>
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }
        
        // Aplicar cor vermelha tomate ap√≥s o script.js carregar
        setTimeout(applyTomatoRed, 100);
    </script>
</body>
</html>
